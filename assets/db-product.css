/* ─────────────────────────────────────────────
   DB Product — Editorial Magazine Aesthetic
   Flat, no shadows, square frames, type-driven
   ───────────────────────────────────────────── */

/* ── Tokens ── */
.db-product {
  --db-product-ink: var(--db-color-charcoal-ink);
  --db-product-muted: rgb(var(--db-color-charcoal-ink-rgb) / 0.55);
  --db-product-border: rgb(var(--db-color-charcoal-ink-rgb) / 0.12);
  --db-product-radius: 0;
  --db-product-shadow: none;
  --db-product-surface: transparent;
}

/* ── Background — flat, clean ── */
.db-product-background {
  background: var(--db-color-soft-white);
}

/* ── Section spacing — generous editorial air ── */
.db-product .product-information {
  color: var(--db-product-ink);
}

.db-product-landing {
  padding-block-start: clamp(56px, 7vw, 96px);
  padding-block-end: clamp(72px, 9vw, 120px);
}

/* ── Grid layout ── */
.db-product .product-information__grid {
  align-items: start;
  row-gap: clamp(32px, 5vw, 64px);
  grid-column: 1 / -1;
  grid-template-columns: minmax(0, 3fr) minmax(0, 2fr);
  column-gap: clamp(32px, 5vw, 80px);
}

.db-product .db-product__media,
.db-product .db-product__info {
  min-width: 0;
  text-align: left;
}

.db-product .db-product__media {
  width: 100%;
  min-width: 0;
}

@media screen and (min-width: 750px) {
  .db-product .product-information__grid.product-information--media-left {
    grid-template-columns: minmax(0, 3fr) minmax(0, 2fr);
  }

  .db-product .product-information__grid.product-information--media-right {
    grid-template-columns: minmax(0, 2fr) minmax(0, 3fr);
  }
}

.db-product .product-information__media {
  grid-column: 1 / 2;
  padding: 0;
}

.db-product .product-details {
  grid-column: 2 / 3;
  padding: 0;
  width: min(100%, 52ch);
  justify-self: start;
  margin: 0;
  justify-content: flex-start;
}

.db-product .product-details > .group-block {
  width: 100%;
}

@media screen and (max-width: 749px) {
  .db-product .product-information__grid {
    grid-template-columns: 1fr;
    column-gap: 0;
  }

  .db-product .product-information__media,
  .db-product .product-details {
    grid-column: 1 / -1;
  }
}

/* ── Media — flat, square frames, no chrome ── */
.db-product .db-product__media .db-product-media {
  position: relative;
  border-radius: 0;
  padding: 0;
  background: transparent;
  border: none;
  box-shadow: none;
  overflow: hidden;
}

.db-product .db-product__media .db-product-media::before {
  content: none;
}

.db-product .db-product__media .db-product-media > * {
  position: relative;
  z-index: 1;
}

.db-product .db-product__media .db-product-media__placeholder {
  aspect-ratio: var(--ratio, 1);
  border-radius: 0;
  overflow: hidden;
  background: var(--db-color-soft-sand);
}

.db-product .db-product__media .db-product-media__placeholder img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Square-frame media gallery images */
.db-product .db-product__media .media-gallery__media,
.db-product .db-product__media .media-gallery__media img,
.db-product .db-product__media .product-media-container,
.db-product .db-product__media .product-media {
  border-radius: 0;
}

/* ── Thumbnails — flat, square ── */
.db-product .db-product__media .slideshow-controls__thumbnails {
  gap: 10px;
  margin-top: 12px;
}

.db-product .db-product__media .slideshow-controls__thumbnail {
  border-radius: 0;
  border: 1px solid transparent;
  background: transparent;
  box-shadow: none;
  transition: border-color var(--db-motion-duration-fast) var(--db-motion-ease-out);
}

.db-product .db-product__media .slideshow-controls__thumbnail img {
  border-radius: 0;
}

.db-product .db-product__media .slideshow-controls__thumbnail:hover {
  transform: none;
  border-color: var(--db-product-border);
  box-shadow: none;
}

.db-product .db-product__media .slideshow-controls__thumbnail[aria-selected='true'] {
  border-color: var(--db-product-ink);
  box-shadow: none;
}

/* ── Details panel — no card, just content ── */
.db-product .db-product__info .text-block {
  margin-inline: 0 !important;
}

.db-product .db-product__info .group-block {
  background: transparent;
  border-radius: 0;
  border: none;
  box-shadow: none;
  padding: 0;
  text-align: left;
}

.db-product .db-product__info .group-block-content {
  gap: clamp(16px, 2.2vw, 24px);
  align-items: flex-start;
  text-align: left;
}

/* Tighten the header group (title + price) internal gap */
.db-product .db-product__info .group-block-content > .group-block .group-block-content {
  gap: clamp(6px, 1vw, 10px);
}

/* ── Divider — use db border colour ── */
.db-product .divider__line {
  border-bottom-color: var(--db-product-border);
}

/* ── Block ordering & sizing ── */
.db-product .db-product__title,
.db-product .db-product__price,
.db-product .db-product__desc,
.db-product .db-product__variants,
.db-product .db-product__cta {
  width: 100%;
  max-width: 100%;
  padding-inline: 0 !important;
  margin-inline: 0;
}

.db-product .db-product__title {
  order: 1;
}

.db-product .db-product__price {
  order: 2;
}

.db-product .db-product__variants {
  order: 3;
}

.db-product .db-product__cta {
  order: 4;
}

.db-product .db-product__desc {
  order: 5;
}

/* ── Typography — Title ── */
.db-product .db-product__title,
.db-product .db-product__title * {
  padding-inline: 0 !important;
  margin-inline: 0;
}

.db-product .db-product__title h1,
.db-product .db-product__title h2,
.db-product .db-product__title h3 {
  font-family: var(--font-heading--family);
  font-size: clamp(2rem, 2.8vw, 3rem);
  font-weight: 400;
  letter-spacing: -0.03em;
  line-height: 1.1;
  color: var(--db-product-ink);
  text-wrap: balance;
  word-break: normal;
  overflow-wrap: normal;
  text-align: left;
}

/* ── Typography — Price (press-style, quiet) ── */
.db-product .db-product__price,
.db-product .db-product__price * {
  padding-inline: 0 !important;
  margin-inline: 0;
}

.db-product .db-product__price .price,
.db-product .db-product__price .price-item {
  font-family: var(--db-type-press-family);
  font-size: 0.78rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--db-product-muted);
  text-align: left;
}

/* ── Hide legacy description (replaced by accordion) ── */
.db-product .db-product__desc,
.db-product [class*="__db_desc"] {
  display: none;
}

/* ── Variants ── */
.db-product .db-product__variants {
  margin-top: 0;
  text-align: left;
}

.db-product .db-product__variants .variant-option--buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 10px 16px;
  justify-content: flex-start;
}

.db-product .db-product__variants .variant-option--buttons legend {
  font-family: var(--db-type-press-family);
  font-size: var(--db-type-press-size);
  letter-spacing: var(--db-type-press-letter-spacing);
  text-transform: var(--db-type-press-case);
  color: var(--db-product-muted);
  text-align: left;
}

/* Color swatches — minimal flat circles */
.db-product .db-product__variants .swatch {
  border-radius: 50%;
  border: none;
  box-shadow: 0 0 0 1px rgb(var(--db-color-charcoal-ink-rgb) / 0.08) inset;
  transition: box-shadow var(--db-motion-duration-fast) var(--db-motion-ease-out),
    transform var(--db-motion-duration-fast) var(--db-motion-ease-out);
}

.db-product .db-product__variants .variant-option__button-label:has(:checked) .swatch {
  box-shadow: 0 0 0 1px var(--db-product-ink) inset,
    0 0 0 1px var(--db-product-ink);
}

.db-product .db-product__variants .variant-option__button-label:hover .swatch {
  box-shadow: 0 0 0 1px rgb(var(--db-color-charcoal-ink-rgb) / 0.2) inset;
  transform: scale(1.05);
}

.db-product .db-product__variants .variant-option__button-label:has([data-option-available='false']) .swatch {
  opacity: 0.25;
  box-shadow: 0 0 0 1px rgb(var(--db-color-charcoal-ink-rgb) / 0.15) inset;
}

.db-product .db-product__variants .variant-option__button-label {
  border: none;
  background: transparent;
  padding: 0;
  min-height: auto;
  border-radius: 0;
  box-shadow: none;
}

.db-product .db-product__variants .variant-option__button-label::before,
.db-product .db-product__variants .variant-option__button-label::after {
  content: none;
}

.db-product .db-product__variants .variant-option__button-label__pill,
.db-product .db-product__variants .variant-option__button-label svg {
  display: none;
}

.db-product .db-product__variants .variant-option__button-label__text {
  font-family: var(--db-type-press-family);
  font-size: var(--db-type-press-size);
  letter-spacing: var(--db-type-press-letter-spacing);
  text-transform: uppercase;
  color: var(--db-product-ink);
}

.db-product .db-product__variants .variant-option__button-label:has(:checked) .variant-option__button-label__text {
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 4px;
}

.db-product .db-product__variants .variant-option__button-label:has([data-option-available='false']) {
  opacity: 0.45;
}

.db-product .db-product__variants .variant-option__button-label:has([data-option-available='false']) .variant-option__button-label__text::after {
  content: ' \2014  Unavailable';
  letter-spacing: 0.14em;
}

/* ── CTA — minimal text-link ── */
.db-product .db-product__cta {
  margin-top: 0;
  text-align: left;
}

.db-product .product-form-buttons {
  display: grid;
  gap: 12px;
  justify-items: start;
  text-align: left;
}

/* Override base buy-buttons block button sizing */
.db-product .product-form-buttons button {
  width: auto;
  padding-inline: 0;
  padding-block: 0;
}

.db-product .product-form-buttons .add-to-cart-button,
.db-product .product-form-buttons .button,
.db-product .product-form-buttons .button--primary,
.db-product .product-form-buttons .button--secondary,
.db-product .product-form-buttons .button--solid,
.db-product .product-form-buttons .button--outline {
  background: transparent;
  border: none;
  border-radius: 0;
  box-shadow: none;
  padding: 0;
  min-height: auto;
  color: var(--db-product-ink, var(--color-foreground));
  font-family: var(--db-type-press-family);
  letter-spacing: var(--db-type-press-letter-spacing);
  text-transform: var(--db-type-press-case);
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 6px;
  text-decoration-color: transparent;
  transition: color var(--db-motion-duration-fast) var(--db-motion-ease-out),
    text-decoration-color var(--db-motion-duration-fast) var(--db-motion-ease-out),
    opacity var(--db-motion-duration-fast) var(--db-motion-ease-out);
}

.db-product .product-form-buttons .add-to-cart-button::after,
.db-product .product-form-buttons .button::after,
.db-product .product-form-buttons .button--primary::after,
.db-product .product-form-buttons .button--secondary::after,
.db-product .product-form-buttons .button--solid::after,
.db-product .product-form-buttons .button--outline::after {
  content: '';
}

.db-product .product-form-buttons .button[aria-disabled='true'],
.db-product .product-form-buttons .button:disabled,
.db-product .product-form-buttons .add-to-cart-button[aria-disabled='true'],
.db-product .product-form-buttons .add-to-cart-button:disabled {
  opacity: 0.4;
  text-decoration: none;
}

.db-product .product-form-buttons .add-to-cart-button:is(:hover, :focus-visible),
.db-product .product-form-buttons .button:is(:hover, :focus-visible),
.db-product .product-form-buttons .button--primary:is(:hover, :focus-visible),
.db-product .product-form-buttons .button--secondary:is(:hover, :focus-visible),
.db-product .product-form-buttons .button--solid:is(:hover, :focus-visible),
.db-product .product-form-buttons .button--outline:is(:hover, :focus-visible) {
  color: var(--db-color-daphne-blue);
  text-decoration-color: currentColor;
}

.db-product .product-form-buttons .add-to-cart-button:focus-visible,
.db-product .product-form-buttons .button:focus-visible,
.db-product .product-form-buttons .button--primary:focus-visible,
.db-product .product-form-buttons .button--secondary:focus-visible,
.db-product .product-form-buttons .button--solid:focus-visible,
.db-product .product-form-buttons .button--outline:focus-visible {
  outline: 2px solid var(--db-focus-ring-color);
  outline-offset: 4px;
  border-radius: 0;
}

/* ── Quantity selector — completely stripped ── */
.db-product .product-details .quantity-selector,
.db-product .db-product__cta .quantity-selector {
  border: 0 !important;
  border-radius: 0 !important;
  background: transparent !important;
  background-color: transparent !important;
  box-shadow: none !important;
  padding: 0;
  gap: 12px;
  height: auto !important;
  flex: 0 0 auto;
  align-self: flex-start;
  --quantity-selector-width: auto;
}

.db-product .product-details .quantity-selector:hover,
.db-product .db-product__cta .quantity-selector:hover {
  background: transparent !important;
  background-color: transparent !important;
}

.db-product .product-details .quantity-selector :is(.quantity-minus, .quantity-plus),
.db-product .db-product__cta .quantity-selector :is(.quantity-minus, .quantity-plus) {
  color: var(--db-product-ink);
  border: 0 !important;
  border-radius: 0 !important;
  background: transparent !important;
  padding: 0;
  width: auto;
  height: auto;
  min-height: auto;
}

.db-product .product-details .quantity-selector input[type='number'],
.db-product .db-product__cta .quantity-selector input[type='number'] {
  border: 0;
  background: transparent;
  padding: 0;
  width: 2.5ch;
  height: auto;
  text-align: center;
  font-family: var(--db-type-press-family);
  font-size: var(--db-type-press-size);
  letter-spacing: var(--db-type-press-letter-spacing);
  color: var(--db-product-ink);
}

/* ── Badges ── */
.db-product .product-badges {
  display: none;
}

.db-product .db-product-card__availability {
  margin: 6px 0 0;
  font-family: var(--db-type-press-family);
  font-size: var(--db-type-press-size);
  letter-spacing: var(--db-type-press-letter-spacing);
  text-transform: uppercase;
  color: var(--db-product-muted);
}

/* ─────────────────────────────────────────────
   Accordion — Native <details> editorial style
   ───────────────────────────────────────────── */

.db-product .db-product-accordion-wrap {
  width: 100%;
  order: 999;
  margin-top: clamp(20px, 3vw, 32px);
  text-align: left;
}

.db-product .db-accordion-row {
  border-top: 1px solid var(--db-product-border);
  text-align: left;
}

.db-product .db-accordion-row:last-child {
  border-bottom: 1px solid var(--db-product-border);
}

/* Summary row */
.db-product .db-accordion-summary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  list-style: none;
  font-family: var(--db-type-press-family);
  font-size: var(--db-type-press-size);
  letter-spacing: var(--db-type-press-letter-spacing);
  text-transform: var(--db-type-press-case);
  color: var(--db-product-ink);
  min-height: 44px;
  padding-block: clamp(14px, 2vw, 20px);
  transition: color var(--db-motion-duration-fast) var(--db-motion-ease-out);
  text-align: left;
}

.db-product .db-accordion-summary::-webkit-details-marker {
  display: none;
}

.db-product .db-accordion-summary:hover {
  color: var(--db-color-daphne-blue);
}

/* Plus icon — rotates to X when open */
.db-product .db-accordion-icon {
  flex-shrink: 0;
  color: var(--db-product-muted);
  transition: transform var(--db-motion-duration-fast) var(--db-motion-ease-out),
    color var(--db-motion-duration-fast) var(--db-motion-ease-out);
}

.db-product .db-accordion-row[open] .db-accordion-icon {
  transform: rotate(45deg);
}

.db-product .db-accordion-summary:hover .db-accordion-icon {
  color: var(--db-color-daphne-blue);
}

/* Content area */
.db-product .db-accordion-content {
  padding-block-end: clamp(14px, 2vw, 20px);
  font-family: var(--font-body--family);
  font-size: var(--font-size--md);
  line-height: 1.7;
  color: var(--db-product-muted);
  max-width: 50ch;
  text-align: left;
}

.db-product .db-accordion-content p {
  margin: 0 0 0.75em;
}

.db-product .db-accordion-content p:last-child {
  margin-bottom: 0;
}

/* ─────────────────────────────────────────────
   Recommendations — Editorial grid
   ───────────────────────────────────────────── */

.db-product .product-recommendations .section-resource-list {
  padding-block: clamp(56px, 7vw, 96px);
}

/* Section header — press-style label with thin rule */
.db-product .product-recommendations h3,
.db-product .product-recommendations h4 {
  font-family: var(--db-type-press-family);
  font-size: var(--db-type-press-size);
  letter-spacing: var(--db-type-press-letter-spacing);
  text-transform: var(--db-type-press-case);
  color: var(--db-product-muted);
  padding-bottom: clamp(16px, 2.5vw, 28px);
  border-bottom: 1px solid var(--db-product-border);
  white-space: nowrap;
  width: 100%;
}

/* Grid */
.db-product .product-recommendations .resource-list {
  gap: clamp(24px, 3.5vw, 40px);
  margin-top: clamp(24px, 3.5vw, 40px);
}

/* Cards — completely flat */
.db-product .product-recommendations .product-card__content {
  background: transparent;
  border-radius: 0;
  border: none;
  box-shadow: none;
  padding: 0;
  transition: none;
}

.db-product .product-recommendations .product-card:hover .product-card__content,
.db-product .product-recommendations .product-card:focus-within .product-card__content {
  transform: none;
  box-shadow: none;
}

/* Images — square frames, gentle zoom on hover */
.db-product .product-recommendations .card-gallery,
.db-product .product-recommendations .product-media {
  border-radius: 0;
  overflow: hidden;
  background: var(--db-color-soft-sand);
}

.db-product .product-recommendations .card-gallery img,
.db-product .product-recommendations .product-media img {
  transition: transform var(--db-motion-duration) var(--db-motion-ease);
}

.db-product .product-recommendations .product-card:hover .card-gallery img,
.db-product .product-recommendations .product-card:hover .product-media img {
  transform: scale(1.04);
}

/* Product title in cards */
.db-product .product-recommendations .product-title,
.db-product .product-recommendations .product-card-link,
.db-product .product-recommendations .product-title a,
.db-product .product-recommendations .product-card a,
.db-product .product-recommendations h6,
.db-product .product-recommendations h6 a {
  font-family: var(--font-body--family);
  font-size: 0.95rem;
  font-weight: 400;
  line-height: 1.4;
  color: var(--db-product-ink);
  text-decoration: none;
}

/* Gallery fallback text — hide when no image */
.db-product .product-recommendations .card-gallery .product-card-link {
  font-size: 0;
  color: transparent;
}

/* Card price — press-style muted */
.db-product .product-recommendations .price,
.db-product .product-recommendations .price-item {
  font-family: var(--db-type-press-family);
  font-size: var(--db-type-press-size);
  letter-spacing: var(--db-type-press-letter-spacing);
  text-transform: uppercase;
  color: var(--db-product-muted);
}
